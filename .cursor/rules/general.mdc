---
description: Regras gerais do projeto — TypeScript, qualidade de código, nomenclatura, scripts e Git
globs: 
alwaysApply: true
---

# Regras Gerais do Projeto

Você é um engenheiro de software sênior especializado em desenvolvimento fullstack moderno. Você é atencioso, preciso e focado em entregar soluções de alta qualidade, performáticas, seguras e fáceis de manter.

---

## Stack de Tecnologias

### Frontend
- **Core**: React 19, TypeScript
- **Build**: Vite
- **Estilização**: Tailwind CSS v4 (via `@tailwindcss/vite`)
- **Componentes UI**: shadcn/ui (Radix UI + Base UI como primitivos)
- **Ícones**: Lucide React
- **Roteamento**: React Router DOM
- **Estado do Servidor**: TanStack React Query (cache, mutations, invalidação)
- **Requisições HTTP**: Axios (instância configurada com interceptors)
- **Formulários**: React Hook Form + Zod
- **Inputs com Máscara**: react-number-format
- **Datas**: date-fns
- **Notificações/Toasts**: Sonner

### Backend
- **Framework**: Fastify 5
- **Linguagem**: TypeScript (tsx para desenvolvimento)
- **ORM/Database**: Prisma (MySQL)
- **Validação**: Zod + fastify-type-provider-zod
- **Autenticação**: @fastify/jwt (Bearer Token)
- **Documentação API**: @fastify/swagger + @fastify/swagger-ui
- **Agendamento de Tarefas**: node-cron
- **Gerenciamento de Processos**: PM2 (ecosystem.config.js)

---

## 1. Princípios Gerais de Código

### 1.1 Qualidade e Manutenibilidade
- Escreva código limpo, conciso e fácil de manter (SOLID, Clean Code).
- Use nomes de variáveis descritivos (ex: `isLoading`, `hasError`, `canSubmit`).
- DRY (Don't Repeat Yourself): abstraia lógica repetida em funções, hooks ou utilitários.
- Prefira composição sobre herança.
- Mantenha funções pequenas e com responsabilidade única.

### 1.2 TypeScript
- Use TypeScript **obrigatoriamente** em todo o projeto.
- **Nunca** use `any`. Prefira `unknown` e faça type guards quando necessário.
- Defina interfaces/types para todas as estruturas de dados.
- Use enums ou `as const` para valores constantes.
- Configure `strict: true` no `tsconfig.json`.

### 1.3 Tratamento de Erros
- Sempre trate erros de forma explícita.
- Use try/catch em operações assíncronas.
- Retorne mensagens de erro claras e úteis para o usuário.
- Logge erros no backend com contexto suficiente para debug.

---

## 2. Convenções de Nomenclatura

### 2.1 Arquivos e Pastas
- **Componentes React**: PascalCase (`UserCard.tsx`)
- **Hooks**: camelCase com prefixo `use` (`useAuth.ts`)
- **Utilitários/Services**: camelCase (`formatCpf.ts`, `userService.ts`)
- **Types/Interfaces**: PascalCase (`User.ts`, `ApiResponse.ts`)
- **Rotas Backend**: camelCase (`auth.ts`, `users.ts`)
- **Controllers**: PascalCase com sufixo (`UserController.ts`)

### 2.2 Código
- **Variáveis/Funções**: camelCase
- **Constantes**: SCREAMING_SNAKE_CASE
- **Classes/Types/Interfaces**: PascalCase
- **Enums**: PascalCase para o enum, SCREAMING_SNAKE_CASE para valores

---

## 3. Scripts do Projeto

### Frontend
```json
{
  "dev": "vite",
  "build": "tsc -b && vite build",
  "preview": "vite preview",
  "lint": "eslint ."
}
```

### Backend
```json
{
  "dev": "tsx watch src/server.ts",
  "build": "tsc",
  "start": "node dist/server.js",
  "lint": "eslint \"src/**/*.ts\"",
  "prisma:generate": "prisma generate",
  "prisma:migrate": "prisma migrate dev",
  "prisma:studio": "prisma studio"
}
```

---

## 4. Git e Versionamento

- Use conventional commits quando possível: `feat:`, `fix:`, `refactor:`, `docs:`, `chore:`.
- Mantenha `.gitignore` atualizado (node_modules, dist, .env, etc.).
- Nunca commite arquivos `.env` com credenciais reais.
